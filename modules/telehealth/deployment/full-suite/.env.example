# WebQXâ„¢ Telehealth Full Suite Configuration
# Copy this file to .env and configure for your environment

# =============================================================================
# CORE TELEHEALTH CONFIGURATION
# =============================================================================

# Deployment Mode (full-suite or standalone)
TELEHEALTH_DEPLOYMENT_MODE=full-suite

# Enabled Components (comma-separated)
TELEHEALTH_ENABLED_COMPONENTS=video-consultation,messaging,ehr-integration,fhir-sync

# Security
TELEHEALTH_SECRET_KEY=your-256-bit-secret-key-change-this-in-production
TELEHEALTH_ENCRYPTION_ALGORITHM=aes-256-gcm
TELEHEALTH_JWT_SECRET=your-jwt-secret-change-this-in-production

# Logging and Audit
TELEHEALTH_LOG_LEVEL=info
TELEHEALTH_AUDIT_ENABLED=true
TELEHEALTH_AUDIT_RETENTION_DAYS=2555  # 7 years for HIPAA compliance

# =============================================================================
# VIDEO CONSULTATION CONFIGURATION (JITSI)
# =============================================================================

# Jitsi Meet Server
JITSI_DOMAIN=meet.jitsi.org
JITSI_APP_ID=webqx-telehealth-app
JITSI_JWT_APP_SECRET=your-jitsi-jwt-secret
JITSI_JWT_KEY_ID=your-jitsi-key-id

# Video Recording
VIDEO_RECORDING_ENABLED=false
VIDEO_RECORDING_STORAGE=local  # Options: local, s3, azure
VIDEO_RECORDING_RETENTION_DAYS=2555
VIDEO_RECORDING_S3_BUCKET=webqx-telehealth-recordings
VIDEO_RECORDING_S3_REGION=us-east-1
VIDEO_RECORDING_S3_ACCESS_KEY=your-s3-access-key
VIDEO_RECORDING_S3_SECRET_KEY=your-s3-secret-key

# Video Quality Settings
VIDEO_DEFAULT_RESOLUTION=720p
VIDEO_ADAPTIVE_BITRATE=true
VIDEO_MAX_BITRATE=2000000

# =============================================================================
# MESSAGING CONFIGURATION (MATRIX)
# =============================================================================

# Matrix Homeserver
MATRIX_HOMESERVER_URL=https://matrix.org
MATRIX_ACCESS_TOKEN=your-matrix-access-token
MATRIX_USER_ID=@webqx-telehealth:matrix.org
MATRIX_DEVICE_ID=WEBQX_TELEHEALTH_DEVICE

# Encryption Settings
MATRIX_ENABLE_E2EE=true
MATRIX_VERIFY_DEVICES=true
MATRIX_CROSS_SIGNING=true
MATRIX_BACKUP_ENABLED=true

# Channel Settings
MATRIX_AUTO_CREATE_CHANNELS=true
MATRIX_CHANNEL_RETENTION_DAYS=2555

# =============================================================================
# EHR INTEGRATION CONFIGURATION (OPENEMR)
# =============================================================================

# OpenEMR Server
OPENEMR_BASE_URL=https://your-openemr-server.com/apis/default
OPENEMR_API_KEY=your-openemr-api-key
OPENEMR_CLIENT_ID=your-openemr-client-id
OPENEMR_VERSION=7.0.2

# Synchronization Settings
EHR_SYNC_INTERVAL=60000  # 1 minute in milliseconds
EHR_SYNC_BATCH_SIZE=50
EHR_CONFLICT_RESOLUTION=latest  # Options: latest, manual, merge
EHR_RETRY_ATTEMPTS=3
EHR_TIMEOUT=30000  # 30 seconds

# Data Mapping Configuration
EHR_PATIENT_ID_FIELD=pid
EHR_PROVIDER_ID_FIELD=provider_id
EHR_APPOINTMENT_ID_FIELD=appointment_id

# =============================================================================
# FHIR SYNCHRONIZATION CONFIGURATION
# =============================================================================

# FHIR Server
FHIR_SERVER_BASE_URL=https://your-fhir-server.com/fhir/R4
FHIR_SERVER_VERSION=R4
FHIR_AUTH_TYPE=oauth2  # Options: none, basic, bearer, oauth2

# OAuth2 Configuration (if FHIR_AUTH_TYPE=oauth2)
FHIR_CLIENT_ID=your-fhir-client-id
FHIR_CLIENT_SECRET=your-fhir-client-secret
FHIR_TOKEN_URL=https://your-auth-server.com/oauth2/token
FHIR_SCOPE=system/*.read system/*.write

# Basic Auth Configuration (if FHIR_AUTH_TYPE=basic)
FHIR_USERNAME=your-fhir-username
FHIR_PASSWORD=your-fhir-password

# Bearer Token Configuration (if FHIR_AUTH_TYPE=bearer)
FHIR_ACCESS_TOKEN=your-fhir-access-token

# Synchronization Settings
FHIR_SYNC_MODE=real-time  # Options: real-time, batch, scheduled
FHIR_SYNC_DIRECTION=bidirectional  # Options: bidirectional, to-fhir, from-fhir
FHIR_VALIDATE_RESOURCES=true
FHIR_SYNC_BATCH_SIZE=100
FHIR_SCHEDULE_EXPRESSION=every 5 minutes

# Enabled FHIR Resource Types
FHIR_ENABLED_TYPES=Patient,Practitioner,Appointment,Encounter,Observation,DocumentReference

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL
POSTGRES_DB=webqx_telehealth
POSTGRES_USER=webqx
POSTGRES_PASSWORD=your-secure-postgres-password
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

# Redis
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=your-secure-redis-password
REDIS_DB=0

# =============================================================================
# MONITORING AND LOGGING
# =============================================================================

# Grafana
GRAFANA_USER=admin
GRAFANA_PASSWORD=your-secure-grafana-password

# Elasticsearch
ELASTICSEARCH_URL=http://elasticsearch:9200
ELASTICSEARCH_USERNAME=elastic
ELASTICSEARCH_PASSWORD=your-secure-elasticsearch-password

# Jaeger
JAEGER_ENDPOINT=http://jaeger:14268/api/traces

# Prometheus
PROMETHEUS_URL=http://prometheus:9090

# =============================================================================
# SSL/TLS CONFIGURATION
# =============================================================================

# SSL Certificate Paths (for nginx)
SSL_CERT_PATH=/etc/nginx/ssl/cert.pem
SSL_KEY_PATH=/etc/nginx/ssl/key.pem

# Let's Encrypt (if using automated SSL)
LETSENCRYPT_EMAIL=your-email@example.com
LETSENCRYPT_DOMAINS=telehealth.your-domain.com

# =============================================================================
# EXTERNAL INTEGRATIONS
# =============================================================================

# Email Configuration (for notifications)
SMTP_HOST=smtp.your-provider.com
SMTP_PORT=587
SMTP_USER=your-smtp-username
SMTP_PASSWORD=your-smtp-password
SMTP_FROM_EMAIL=noreply@your-domain.com

# SMS Configuration (for emergency notifications)
SMS_PROVIDER=twilio  # Options: twilio, aws-sns
TWILIO_ACCOUNT_SID=your-twilio-account-sid
TWILIO_AUTH_TOKEN=your-twilio-auth-token
TWILIO_PHONE_NUMBER=+1234567890

# Push Notifications
PUSH_NOTIFICATION_PROVIDER=firebase  # Options: firebase, apns
FIREBASE_SERVER_KEY=your-firebase-server-key
FIREBASE_PROJECT_ID=your-firebase-project-id

# =============================================================================
# COMPLIANCE AND SECURITY
# =============================================================================

# HIPAA Compliance
HIPAA_MODE=true
HIPAA_AUDIT_ALL_ACCESS=true
HIPAA_DATA_RETENTION_DAYS=2555  # 7 years

# Security Headers
SECURITY_HSTS_ENABLED=true
SECURITY_CSP_ENABLED=true
SECURITY_CORS_ORIGINS=https://your-domain.com,https://your-app.com

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000  # 15 minutes
RATE_LIMIT_MAX_REQUESTS=100

# Session Configuration
SESSION_SECRET=your-session-secret-change-this-in-production
SESSION_TIMEOUT_MS=3600000  # 1 hour
SESSION_SECURE_COOKIES=true

# =============================================================================
# DEVELOPMENT/DEBUGGING (Remove in production)
# =============================================================================

# Debug Mode
DEBUG_MODE=false
DEBUG_LOG_SQL=false
DEBUG_LOG_HTTP=false

# Mock Services (for development)
USE_MOCK_JITSI=false
USE_MOCK_MATRIX=false
USE_MOCK_OPENEMR=false
USE_MOCK_FHIR=false

# Test Users (for development)
TEST_PROVIDER_ID=provider_test_001
TEST_PATIENT_ID=patient_test_001

# =============================================================================
# SCALING AND PERFORMANCE
# =============================================================================

# Node.js Performance
NODE_OPTIONS=--max-old-space-size=2048
UV_THREADPOOL_SIZE=16

# Connection Pools
DB_POOL_MIN=2
DB_POOL_MAX=10
REDIS_POOL_MIN=1
REDIS_POOL_MAX=5

# Timeouts
HTTP_TIMEOUT=30000
DB_TIMEOUT=5000
REDIS_TIMEOUT=3000

# =============================================================================
# BACKUP AND RECOVERY
# =============================================================================

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=webqx-telehealth-backups
BACKUP_ENCRYPTION_KEY=your-backup-encryption-key

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Component Feature Flags
FEATURE_VIDEO_RECORDING=true
FEATURE_MESSAGE_TRANSLATION=false
FEATURE_AI_TRANSCRIPTION=false
FEATURE_EMERGENCY_ALERTS=true
FEATURE_MOBILE_APP_SUPPORT=true

# Integration Feature Flags
FEATURE_EPIC_INTEGRATION=false
FEATURE_CERNER_INTEGRATION=false
FEATURE_SMART_ON_FHIR=true
FEATURE_BLOCKCHAIN_AUDIT=false