<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>WebQx Access</title>
  <meta name="description" content="Role-based access landing for WebQx demo." />
  <link rel="stylesheet" href="assets/webqx-emr-theme.css" />
  <style>
    body { font-family: var(--wqx-font-sans); margin:0; }
    .layout { max-width:880px; margin:0 auto; padding:56px 28px 64px; }
    h1 { font-size:28px; font-weight:600; margin:0 0 8px; letter-spacing:.5px; }
    p.lead { margin:0 0 32px; font-size:15px; color: var(--wqx-text-soft); line-height:1.45; }
    .grid { display:grid; gap:20px; grid-template-columns:repeat(auto-fit,minmax(240px,1fr)); }
    .card { background: var(--wqx-surface); border:1px solid var(--wqx-border); border-radius: var(--wqx-radius-lg); padding:20px 18px 18px; box-shadow: var(--wqx-shadow-sm); display:flex; flex-direction:column; justify-content:space-between; }
    .card h2 { font-size:16px; font-weight:600; margin:0 0 4px; color: var(--wqx-primary); letter-spacing:.3px; }
    .meta { font-size:12px; color: var(--wqx-text-fade); margin-bottom:12px; }
    .cred { font-family: ui-monospace, SFMono-Regular, Menlo, monospace; font-size:12px; line-height:1.4; background: var(--wqx-surface-alt); padding:6px 8px; border-radius: var(--wqx-radius-sm); border:1px solid var(--wqx-border); position:relative; }
    button.copy { position:absolute; top:4px; right:4px; font-size:11px; background: var(--wqx-primary-soft); color: var(--wqx-primary); border:1px solid var(--wqx-primary); padding:2px 6px; border-radius: var(--wqx-radius-xs); cursor:pointer; }
    button.copy:hover { background: var(--wqx-primary-fade); }
    .actions { margin-top:14px; display:flex; gap:8px; }
    .link-btn { text-decoration:none; }
    footer { margin-top:64px; font-size:11px; color: var(--wqx-text-fade); text-align:center; }
    header.top { display:flex; align-items:center; justify-content:space-between; margin-bottom:32px; }
    .env { font-size:11px; padding:4px 8px; background: var(--wqx-primary-soft); color: var(--wqx-primary); border-radius: var(--wqx-radius-pill); }
    @media (max-width:640px){ .layout { padding:40px 20px 56px; } }
  </style>
</head>
<body class="webqx-theme">
  <div class="layout">
    <header class="top">
      <div>
        <h1>WebQx Role Access</h1>
        <p class="lead">Select a role to open the corresponding portal. Use the provided demo credentials for the live Railway backend. No emojis. Minimal surface for evaluation.</p>
      </div>
      <div id="envTag" class="env" aria-live="polite">Loading…</div>
    </header>

    <section aria-labelledby="roles-heading">
      <h2 id="roles-heading" class="wqx-visually-hidden">Available Roles</h2>
      <div class="grid" id="roleGrid">
        <div class="card" data-role="patient">
          <div>
            <h2>Patient Portal</h2>
            <div class="meta">Scheduling, records, messaging</div>
            <div class="cred" data-cred>
              <div><strong>User:</strong> demo@patient.com</div>
              <div><strong>Pass:</strong> patient123</div>
              <button class="copy" data-copy>Copy</button>
            </div>
          </div>
            <div class="actions">
              <a class="wqx-btn wqx-btn-primary link-btn" href="patient-portal/index.html" data-launch>Open</a>
            </div>
        </div>
        <div class="card" data-role="provider">
          <div>
            <h2>Provider Portal</h2>
            <div class="meta">Clinical workflows & notes</div>
            <div class="cred" data-cred>
              <div><strong>User:</strong> physician@webqx.com</div>
              <div><strong>Pass:</strong> demo123</div>
              <button class="copy" data-copy>Copy</button>
            </div>
          </div>
            <div class="actions">
              <a class="wqx-btn wqx-btn-primary link-btn" href="provider/index.html" data-launch>Open</a>
            </div>
        </div>
        <div class="card" data-role="admin">
          <div>
            <h2>Admin Console</h2>
            <div class="meta">User & system management</div>
            <div class="cred" data-cred>
              <div><strong>User:</strong> admin@webqx.com</div>
              <div><strong>Pass:</strong> admin123</div>
              <button class="copy" data-copy>Copy</button>
            </div>
          </div>
            <div class="actions">
              <a class="wqx-btn wqx-btn-primary link-btn" href="admin-console/index.html" data-launch>Open</a>
            </div>
        </div>
        <div class="card" data-role="telehealth">
          <div>
            <h2>Telehealth Suite</h2>
            <div class="meta">Video & remote consult tools</div>
            <div class="cred" data-cred>
              <div><strong>User:</strong> physician@webqx.com</div>
              <div><strong>Pass:</strong> demo123</div>
              <button class="copy" data-copy>Copy</button>
            </div>
          </div>
            <div class="actions">
              <a class="wqx-btn wqx-btn-primary link-btn" href="telehealth_realtime_demo.html" data-launch>Open</a>
            </div>
        </div>
      </div>
    </section>

    <section style="margin-top:48px;" aria-labelledby="backend-heading">
      <h2 id="backend-heading" style="font-size:15px;font-weight:600;margin:0 0 12px;">Backend Environment</h2>
      <div class="wqx-alert" id="envInfo">Detecting configuration…</div>
    </section>

    <footer>
      © 2025 WebQx. Demo access only. Production backend hosted on Railway.
    </footer>
  </div>

  <script src="webqx-remote-config.js"></script>
  <script>
    (function(){
      const envTag = document.getElementById('envTag');
      const envInfo = document.getElementById('envInfo');
      function updateEnv() {
        if (!window.WEBQX_CONFIG) return setTimeout(updateEnv, 300);
        const cfg = WEBQX_CONFIG.getConfig();
        envTag.textContent = cfg.environment ? cfg.environment : 'Demo';
        envInfo.textContent = 'API Base: ' + cfg.api_base + ' | Auth: ' + (cfg.auth_base || 'n/a');
      }
      updateEnv();
      document.querySelectorAll('[data-copy]').forEach(btn => {
        btn.addEventListener('click', () => {
          const parent = btn.closest('[data-cred]');
          const text = parent.innerText.replace(/Copy/g,'').trim();
          navigator.clipboard.writeText(text).then(()=>{
            btn.textContent = 'Copied';
            setTimeout(()=>btn.textContent='Copy',1400);
          });
        });
      });
    })();
  </script>
</body>
</html>