# WebQX GitHub Webhooks Environment Configuration
# Copy this file to .env and update the values

# GitHub Webhook Secret (Required)
# Generate a secure random string for webhook signature verification
# Example: openssl rand -hex 32
WEBHOOK_SECRET=your-secure-webhook-secret-here

# Deployment Environment (Optional)
# Options: dev, staging, prod
ENVIRONMENT=dev

# Logging Level (Optional)
# Options: DEBUG, INFO, WARN, ERROR
LOG_LEVEL=INFO

# AWS Configuration (Set via AWS CLI or environment)
# AWS_REGION=us-east-1
# AWS_ACCESS_KEY_ID=your-access-key
# AWS_SECRET_ACCESS_KEY=your-secret-key

# CloudFormation Stack Configuration (Optional)
STACK_NAME=webqx-github-webhooks

# Lambda Function Configuration (Optional)
FUNCTION_TIMEOUT=30
FUNCTION_MEMORY=512

# API Gateway Configuration (Optional)
API_THROTTLE_RATE=100
API_THROTTLE_BURST=200

# Monitoring Configuration (Optional)
ENABLE_XRAY_TRACING=false
LOG_RETENTION_DAYS=14

# Healthcare Specific Configuration (Optional)
ENABLE_HIPAA_COMPLIANCE_CHECKS=true
ENABLE_AUDIT_LOGGING=true
AUDIT_LOG_RETENTION_DAYS=2555  # 7 years for healthcare compliance

# Custom Event Processing (Optional)
ENABLE_CUSTOM_EVENT_PROCESSING=true
PROCESS_DOCUMENTATION_CHANGES=true
PROCESS_SECURITY_SCANS=true
PROCESS_COMPLIANCE_CHECKS=true

# GitHub Repository Configuration (Optional)
# These can be dynamically extracted from webhook payloads
GITHUB_ORGANIZATION=WebQx
GITHUB_REPOSITORY=webqx
DEFAULT_BRANCH=main

# Notification Configuration (Optional)
# SLACK_WEBHOOK_URL=https://hooks.slack.com/services/...
# EMAIL_NOTIFICATIONS=admin@webqx.health
# SNS_TOPIC_ARN=arn:aws:sns:us-east-1:123456789012:webqx-notifications

# Security Configuration (Optional)
REQUIRE_SIGNATURE_VERIFICATION=true
ENABLE_IP_WHITELIST=false
# ALLOWED_IP_RANGES=140.82.112.0/20,185.199.108.0/22

# Performance Configuration (Optional)
MAX_CONCURRENT_EXECUTIONS=10
RESERVED_CONCURRENCY=5

# Development Configuration (Optional)
# Only used in development environment
MOCK_GITHUB_EVENTS=false
ENABLE_DEBUG_LOGGING=false
DISABLE_SIGNATURE_VERIFICATION=false

##############################################################################
# DEPLOYMENT INSTRUCTIONS
##############################################################################

# 1. Copy this file to .env:
#    cp .env.example .env

# 2. Generate a secure webhook secret:
#    openssl rand -hex 32

# 3. Update WEBHOOK_SECRET with the generated value

# 4. Configure AWS credentials:
#    aws configure

# 5. Deploy the webhook infrastructure:
#    ./scripts/deploy.sh

# 6. Configure GitHub webhook with the deployed URL

# 7. Test the webhook:
#    curl https://your-api-gateway-url/health

##############################################################################
# SECURITY NOTES
##############################################################################

# - Keep this file secure and never commit it to version control
# - Use AWS Secrets Manager or Parameter Store for production secrets
# - Rotate webhook secrets regularly (every 90 days recommended)
# - Enable CloudTrail for audit logging of all AWS API calls
# - Use least privilege IAM policies for Lambda execution role
# - Enable VPC configuration for enhanced network security
# - Consider using AWS WAF for additional API Gateway protection

##############################################################################
# HEALTHCARE COMPLIANCE NOTES
##############################################################################

# For healthcare applications handling PHI (Protected Health Information):
# - Ensure ENABLE_HIPAA_COMPLIANCE_CHECKS=true
# - Set AUDIT_LOG_RETENTION_DAYS=2555 (7 years)
# - Enable encryption at rest for all data storage
# - Use TLS 1.2+ for all data in transit
# - Implement proper access controls and authentication
# - Regular security assessments and penetration testing
# - Business Associate Agreement (BAA) with AWS if handling PHI