# Environment Variables for WebQX Healthcare Platform

# Server Configuration
PORT=3000
NODE_ENV=production

# Database Configuration (PostgreSQL)
DATABASE_URL=postgresql://username:password@hostname:port/database_name
DB_HOST=localhost
DB_PORT=5432
DB_NAME=webqx_healthcare
DB_USER=webqx_user
DB_PASSWORD=your_secure_password

# Firebase Configuration
FIREBASE_PROJECT_ID=your_firebase_project_id
FIREBASE_PRIVATE_KEY_ID=your_private_key_id
FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nyour_private_key\n-----END PRIVATE KEY-----\n"
FIREBASE_CLIENT_EMAIL=your_service_account@your_project.iam.gserviceaccount.com
FIREBASE_CLIENT_ID=your_client_id
FIREBASE_AUTH_URI=https://accounts.google.com/o/oauth2/auth
FIREBASE_TOKEN_URI=https://oauth2.googleapis.com/token

# Security & Authentication
JWT_SECRET=your_jwt_secret_key_min_32_characters
ENCRYPTION_KEY=your_encryption_key_for_hipaa_compliance
SESSION_SECRET=your_session_secret_key

# SSO Configuration
SSO_SECRET_KEY=your_sso_secret_key_minimum_32_characters_for_jwt_signing
SSO_SESSION_TIMEOUT=3600000
SSO_AUDIT_ENABLED=true

# OAuth2 Central IDP Configuration
OAUTH2_ISSUER=https://auth.webqx.health
OAUTH2_AUTH_ENDPOINT=https://auth.webqx.health/oauth2/authorize
OAUTH2_TOKEN_ENDPOINT=https://auth.webqx.health/oauth2/token
OAUTH2_USERINFO_ENDPOINT=https://auth.webqx.health/oauth2/userinfo
OAUTH2_JWKS_URI=https://auth.webqx.health/.well-known/jwks.json
OAUTH2_REVOCATION_ENDPOINT=https://auth.webqx.health/oauth2/revoke

# OAuth2 Client Configuration
OAUTH2_CLIENT_ID=webqx-healthcare-platform
OAUTH2_CLIENT_SECRET=your_oauth2_client_secret
OAUTH2_REDIRECT_URI=http://localhost:3000/auth/oauth2/callback
OAUTH2_SCOPE=openid profile email patient/*.read patient/*.write user/*.read

# Microsoft Entra ID Configuration for Healthcare

# Patient Portal Azure Configuration
AZURE_PATIENT_TENANT_ID=your_patient_portal_tenant_id
AZURE_PATIENT_CLIENT_ID=your_patient_portal_client_id
AZURE_PATIENT_CLIENT_SECRET=your_patient_portal_client_secret
AZURE_PATIENT_AUTHORITY=https://login.microsoftonline.com/your_patient_portal_tenant_id

# Provider Portal Azure Configuration (if different)
AZURE_PROVIDER_TENANT_ID=your_provider_portal_tenant_id
AZURE_PROVIDER_CLIENT_ID=your_provider_portal_client_id
AZURE_PROVIDER_CLIENT_SECRET=your_provider_portal_client_secret
AZURE_PROVIDER_AUTHORITY=https://login.microsoftonline.com/your_provider_portal_tenant_id

# Azure Communication Services (for SMS)
AZURE_COMMUNICATION_CONNECTION_STRING=endpoint=https://your-resource.communication.azure.com/;accesskey=your_access_key

# Azure Identity Configuration
AZURE_TENANT_ID=your_default_tenant_id
AZURE_CLIENT_ID=your_default_client_id
AZURE_CLIENT_SECRET=your_default_client_secret
OAUTH2_VALIDATE_AUDIENCE=true
OAUTH2_VALIDATE_ISSUER=true
OAUTH2_CLOCK_TOLERANCE=60
OAUTH2_ENABLE_REFRESH=true
OAUTH2_REFRESH_THRESHOLD=300

# OAuth2 RBAC Configuration
OAUTH2_RBAC_ENABLED=true
OAUTH2_ROLES_CLAIM=roles
OAUTH2_PERMISSIONS_CLAIM=permissions
OAUTH2_GROUPS_CLAIM=groups
OAUTH2_PATIENT_ID_CLAIM=patient_id
OAUTH2_USER_ID_CLAIM=sub
OAUTH2_EMAIL_CLAIM=email
OAUTH2_NAME_CLAIM=name
OAUTH2_DEFAULT_ROLES=patient

# OAuth2 Security Configuration
OAUTH2_ALLOWED_ALGORITHMS=RS256,RS384,RS512
OAUTH2_PKCE_ENABLED=true
OAUTH2_PKCE_METHOD=S256
OAUTH2_STATE_VALIDATION=true
OAUTH2_NONCE_VALIDATION=true

# OAuth2 Development Configuration (DO NOT USE IN PRODUCTION)
OAUTH2_SKIP_SIGNATURE_VERIFICATION=false
OAUTH2_MOCK_MODE=false

# OAuth2 Provider-Specific Configuration
# Azure AD OAuth2
AZURE_CLIENT_ID=your_azure_ad_client_id
AZURE_CLIENT_SECRET=your_azure_ad_client_secret
AZURE_REDIRECT_URI=https://your-domain.com/auth/oauth2/azure/callback
AZURE_TENANT_ID=your_azure_tenant_id

# Google OAuth2
GOOGLE_CLIENT_ID=your_google_client_id.googleusercontent.com
GOOGLE_CLIENT_SECRET=your_google_client_secret
GOOGLE_REDIRECT_URI=https://your-domain.com/auth/oauth2/google/callback

# SAML Configuration
SAML_ENTRY_POINT=https://your-idp.com/sso/saml
SAML_ISSUER=https://your-domain.com
SAML_CERT=path/to/idp-certificate.pem
SAML_PRIVATE_CERT=path/to/sp-private-key.pem
SAML_DECRYPTION_PVK=path/to/sp-decryption-private-key.pem
SAML_PROVIDER=azure

# Azure AD SAML
AZURE_SAML_ENTRY_POINT=https://login.microsoftonline.com/your-tenant/saml2
AZURE_SAML_CERT=path/to/azure-saml-certificate.pem

# Okta SAML
OKTA_SAML_ENTRY_POINT=https://your-org.okta.com/app/your-app/sso/saml
OKTA_SAML_CERT=path/to/okta-saml-certificate.pem

# SSO Security
ALLOWED_REDIRECT_DOMAINS=your-domain.com,app.your-domain.com

# External APIs
FHIR_SERVER_URL=https://your-fhir-server.com/fhir
HL7_ENDPOINT=https://your-hl7-integration.com
PHARMACY_API_URL=https://your-pharmacy-api.com
LAB_RESULTS_API_URL=https://your-lab-results-api.com
RXNAV_API_BASE_URL=https://rxnav.nlm.nih.gov/REST

# AI/NLP Services
WHISPER_API_URL=https://api.openai.com/v1/audio/transcriptions
WHISPER_API_KEY=your_whisper_api_key
OPENAI_API_KEY=your_openai_api_key
NLP_SERVICE_URL=https://your-nlp-service.com

# Whisper Configuration
WHISPER_TIMEOUT=30000
WHISPER_MAX_FILE_SIZE=26214400
WHISPER_CHUNK_DURATION=3000
WHISPER_SAMPLE_RATE=16000
WHISPER_ENABLE_VAD=true
WHISPER_SILENCE_THRESHOLD=0.01
WHISPER_MAX_SILENCE_DURATION=2000

# Healthcare Compliance
HIPAA_COMPLIANT_MODE=true
ENABLE_AUDIT_LOGGING=true
ENABLE_DATA_ENCRYPTION=true
PII_DETECTION_ENABLED=true

# Performance & Monitoring
ENABLE_RATE_LIMITING=true
MAX_REQUESTS_PER_MINUTE=60
ENABLE_IP_WHITELIST=false
ENABLE_PERFORMANCE_MONITORING=true
METRICS_ENDPOINT=https://your-metrics-endpoint.com

# Messaging & Communication
MATRIX_SERVER_URL=https://your-matrix-server.com
MEDPLUM_API_URL=https://api.medplum.com
SECURE_MESSAGING_KEY=your_secure_messaging_encryption_key

# Compliance & Audit
AUDIT_LOG_RETENTION_DAYS=2555  # 7 years as per HIPAA
VAULT_SERVER_URL=https://your-vault-server.com
VAULT_TOKEN=your_vault_token

# Email Configuration
SMTP_HOST=smtp.your-email-provider.com
SMTP_PORT=587
SMTP_USER=noreply@webqx.health
SMTP_PASSWORD=your_smtp_password
FROM_EMAIL=noreply@webqx.health

# Telehealth Configuration
TELEHEALTH_ENABLED=true
TELEHEALTH_TLS_CERT_PATH=/etc/ssl/certs/telehealth.pem
TELEHEALTH_TLS_KEY_PATH=/etc/ssl/private/telehealth.key
TELEHEALTH_TLS_CA_PATH=/etc/ssl/certs/ca.pem
TELEHEALTH_REQUIRE_CLIENT_CERT=false

# Video Conferencing
WEBRTC_STUN_SERVERS=stun:stun.l.google.com:19302,stun:stun1.l.google.com:19302
WEBRTC_TURN_SERVERS=turn:your-turn-server.com:3478
WEBRTC_TURN_USERNAME=username
WEBRTC_TURN_PASSWORD=password

# Real-time Transcription
REALTIME_WHISPER_ENABLED=true
WHISPER_STREAMING_ENDPOINT=wss://api.openai.com/v1/realtime
WHISPER_STREAMING_API_KEY=your_openai_streaming_api_key

# HIPAA Compliance for Telehealth
HIPAA_AUDIT_ENABLED=true
HIPAA_RETENTION_DAYS=2555
HIPAA_ENCRYPTION_KEY=your_256_bit_encryption_key_for_hipaa
PHI_ANONYMIZATION_ENABLED=true
AUDIT_LOG_RETENTION_DAYS=2555
BREACH_NOTIFICATION_EMAIL=security@webqx.health

# Session Management
SESSION_TIMEOUT_MINUTES=60
MAX_CONCURRENT_SESSIONS=10
SESSION_RECORDING_ENABLED=false
REQUIRE_PATIENT_CONSENT=true

# Keycloak Configuration
KEYCLOAK_URL=http://localhost:8080/auth
KEYCLOAK_REALM=webqx-healthcare
KEYCLOAK_CLIENT_ID=webqx-openemr
KEYCLOAK_CLIENT_SECRET=your_keycloak_client_secret
KEYCLOAK_PUBLIC_CLIENT=false
KEYCLOAK_BEARER_ONLY=true
KEYCLOAK_CHECK_LOGIN_IFRAME=true
KEYCLOAK_CHECK_LOGIN_IFRAME_INTERVAL=5
KEYCLOAK_ON_LOAD=check-sso
KEYCLOAK_RESPONSE_MODE=fragment
KEYCLOAK_FLOW=standard
KEYCLOAK_ENABLE_LOGGING=false
KEYCLOAK_LOGOUT_REDIRECT_URI=http://localhost:3000/login
KEYCLOAK_ENABLE_PROVIDER_VERIFICATION=true
KEYCLOAK_ENABLE_AUDIT_LOGGING=true
KEYCLOAK_CHECK_TOKEN_TYPE=true
KEYCLOAK_CHECK_AUDIENCE=true
KEYCLOAK_ALLOWED_AUDIENCES=webqx-openemr,webqx-patient-portal
KEYCLOAK_MIN_TOKEN_AGE=0
KEYCLOAK_MAX_TOKEN_AGE=3600

# OpenEMR Integration Configuration
OPENEMR_BASE_URL=https://openemr.example.com
OPENEMR_CLIENT_ID=webqx-integration
OPENEMR_CLIENT_SECRET=your_openemr_client_secret
OPENEMR_API_VERSION=v1
OPENEMR_TIMEOUT=30000
OPENEMR_ENABLE_TOKEN_EXCHANGE=true
OPENEMR_ENABLE_ROLE_MAPPING=true
OPENEMR_ENABLE_PROVIDER_VERIFICATION=true
OPENEMR_DEFAULT_PATIENT_ACCESS=false
OPENEMR_AUDIT_ALL_REQUESTS=true

# Healthcare Integration
EPIC_CLIENT_ID=your_epic_client_id
EPIC_CLIENT_SECRET=your_epic_client_secret
CERNER_API_KEY=your_cerner_api_key
ALLSCRIPTS_API_KEY=your_allscripts_api_key

# Analytics & Monitoring
GRAFANA_URL=https://your-grafana-instance.com
METABASE_URL=https://your-metabase-instance.com
MONITORING_API_KEY=your_monitoring_api_key

# Localization
DEFAULT_LANGUAGE=en
SUPPORTED_LANGUAGES=en,es,fr,de,pt,zh,ar,hi,ja
TRANSLATION_API_KEY=your_translation_api_key

# Ottehr Integration
OTTEHR_API_BASE_URL=https://api.ottehr.com
OTTEHR_API_KEY=your_ottehr_api_key
OTTEHR_CLIENT_ID=your_ottehr_client_id
OTTEHR_CLIENT_SECRET=your_ottehr_client_secret
OTTEHR_ENVIRONMENT=sandbox
OTTEHR_WEBHOOK_SECRET=your_ottehr_webhook_secret
OTTEHR_TIMEOUT=30000
OTTEHR_ENABLE_NOTIFICATIONS=true
OTTEHR_ENABLE_ORDERING=true
OTTEHR_ENABLE_POS_INTEGRATION=true
OTTEHR_ENABLE_DELIVERY_TRACKING=true

# Keycloak Integration for Ottehr SSO
KEYCLOAK_ENABLED=true
KEYCLOAK_BASE_URL=https://your-keycloak-server.com
KEYCLOAK_REALM=webqx-healthcare
KEYCLOAK_CLIENT_ID=ottehr-integration
KEYCLOAK_CLIENT_SECRET=your_keycloak_client_secret
KEYCLOAK_REDIRECT_URI=https://your-app.com/auth/keycloak/callback
KEYCLOAK_SCOPE=openid profile email ottehr:access
KEYCLOAK_ISSUER=https://your-keycloak-server.com/realms/webqx-healthcare
KEYCLOAK_JWKS_URI=https://your-keycloak-server.com/realms/webqx-healthcare/protocol/openid_connect/certs
KEYCLOAK_TOKEN_ENDPOINT=https://your-keycloak-server.com/realms/webqx-healthcare/protocol/openid_connect/token
KEYCLOAK_AUTHORIZATION_ENDPOINT=https://your-keycloak-server.com/realms/webqx-healthcare/protocol/openid_connect/auth
KEYCLOAK_USERINFO_ENDPOINT=https://your-keycloak-server.com/realms/webqx-healthcare/protocol/openid_connect/userinfo
KEYCLOAK_LOGOUT_ENDPOINT=https://your-keycloak-server.com/realms/webqx-healthcare/protocol/openid_connect/logout
KEYCLOAK_ENABLE_ROLE_MAPPING=true
KEYCLOAK_ROLE_MAPPING_CLAIM=realm_access.roles
KEYCLOAK_DEFAULT_ROLE=user

# ==============================================
# AWS CONFIGURATION
# ==============================================

# AWS Region and Account
AWS_REGION=us-east-1
AWS_ACCOUNT_ID=your_aws_account_id

# AWS Credentials (for local development only - use IAM roles in production)
# AWS_ACCESS_KEY_ID=your_aws_access_key_id
# AWS_SECRET_ACCESS_KEY=your_aws_secret_access_key

# AWS Lambda Configuration
LAMBDA_RUNTIME=nodejs18.x
LAMBDA_MEMORY_SIZE=512
LAMBDA_TIMEOUT=30
LAMBDA_RESERVED_CONCURRENCY=0

# AWS DynamoDB Tables
DYNAMODB_PATIENTS_TABLE=webqx-healthcare-patients-dev
DYNAMODB_APPOINTMENTS_TABLE=webqx-healthcare-appointments-dev
DYNAMODB_OBSERVATIONS_TABLE=webqx-healthcare-observations-dev
DYNAMODB_AUDIT_LOGS_TABLE=webqx-healthcare-audit-logs-dev
DYNAMODB_TELEHEALTH_SESSIONS_TABLE=webqx-healthcare-telehealth-sessions-dev
DYNAMODB_TRANSCRIPTIONS_TABLE=webqx-healthcare-transcriptions-dev

# AWS S3 Buckets
S3_HEALTHCARE_DATA_BUCKET=webqx-healthcare-data-dev
S3_AUDIT_LOGS_BUCKET=webqx-healthcare-audit-logs-dev
S3_TELEHEALTH_DATA_BUCKET=webqx-healthcare-telehealth-data-dev

# AWS KMS Encryption
KMS_KEY_ID=your_kms_key_id
KMS_KEY_ARN=arn:aws:kms:us-east-1:account:key/your_key_id

# AWS Systems Manager Parameter Store
SSM_JWT_SECRET_PARAMETER=/webqx/dev/jwt-secret
SSM_ENCRYPTION_KEY_PARAMETER=/webqx/dev/encryption-key
SSM_WHISPER_API_KEY_PARAMETER=/webqx/dev/whisper-api-key

# AWS API Gateway
API_GATEWAY_STAGE=dev
API_GATEWAY_THROTTLE_RATE_LIMIT=1000
API_GATEWAY_THROTTLE_BURST_LIMIT=2000
API_GATEWAY_CUSTOM_DOMAIN=api-dev.webqx.health

# AWS CloudWatch
CLOUDWATCH_LOG_GROUP_LAMBDA=/aws/lambda/webqx-healthcare-dev
CLOUDWATCH_LOG_GROUP_API_GATEWAY=/aws/apigateway/webqx-healthcare-dev
CLOUDWATCH_LOG_RETENTION_DAYS=2555

# AWS X-Ray Tracing
XRAY_TRACING_ENABLED=true
XRAY_SAMPLING_RATE=0.1

# AWS VPC Configuration
VPC_ID=vpc-your_vpc_id
PRIVATE_SUBNET_IDS=subnet-xxx,subnet-yyy,subnet-zzz
LAMBDA_SECURITY_GROUP_ID=sg-your_security_group_id

# AWS RDS (Optional - if using PostgreSQL alongside DynamoDB)
RDS_ENDPOINT=your-rds-endpoint.region.rds.amazonaws.com
RDS_PORT=5432
RDS_DATABASE_NAME=webqx_healthcare
RDS_USERNAME=webqx_admin
RDS_PASSWORD=your_secure_rds_password
RDS_SSL_ENABLED=true

# AWS Secrets Manager
SECRETS_MANAGER_DB_CREDENTIALS_ARN=arn:aws:secretsmanager:region:account:secret:db-credentials

# AWS SNS for Notifications
SNS_TOPIC_ARN=arn:aws:sns:region:account:webqx-healthcare-alerts
SNS_ENABLE_NOTIFICATIONS=true

# AWS SQS Dead Letter Queue
SQS_DLQ_URL=https://sqs.region.amazonaws.com/account/webqx-healthcare-dlq

# AWS WAF
WAF_WEB_ACL_ARN=arn:aws:wafv2:region:account:regional/webacl/webqx-api-protection

# AWS CloudFront (Optional - for CDN)
CLOUDFRONT_DISTRIBUTION_ID=your_cloudfront_distribution_id
CLOUDFRONT_DOMAIN_NAME=cdn.webqx.health

# AWS Route53 (Optional - for custom domains)
ROUTE53_HOSTED_ZONE_ID=your_route53_zone_id

# AWS Certificate Manager
ACM_CERTIFICATE_ARN=arn:aws:acm:region:account:certificate/certificate_id

# ==============================================
# AWS SERVERLESS FRAMEWORK CONFIGURATION
# ==============================================

# Serverless Framework Stage
SERVERLESS_STAGE=dev
SERVERLESS_REGION=us-east-1
SERVERLESS_ORG=webqx-health
SERVERLESS_APP=webqx-healthcare-platform

# ==============================================
# AWS SAM CONFIGURATION
# ==============================================

# SAM Configuration
SAM_STACK_NAME=webqx-healthcare-sam-dev
SAM_S3_BUCKET=webqx-sam-deployment-bucket
SAM_CAPABILITIES=CAPABILITY_IAM,CAPABILITY_NAMED_IAM

# ==============================================
# TERRAFORM CONFIGURATION
# ==============================================

# Terraform Backend
TF_STATE_BUCKET=webqx-terraform-state
TF_STATE_KEY=webqx-healthcare/terraform.tfstate
TF_STATE_REGION=us-east-1
TF_LOCK_TABLE=webqx-terraform-locks

# ==============================================
# AWS COST OPTIMIZATION
# ==============================================

# Cost Allocation Tags
COST_CENTER=Healthcare Technology
PROJECT_NAME=WebQX Healthcare Platform
ENVIRONMENT=dev
OWNER=WebQX Health

# Reserved Capacity (for cost optimization)
DYNAMODB_RESERVED_CAPACITY=false
RDS_RESERVED_INSTANCE=false

# ==============================================
# AWS DISASTER RECOVERY
# ==============================================

# Backup Configuration
BACKUP_RETENTION_DAYS=2555
CROSS_REGION_BACKUP_ENABLED=false
BACKUP_REGION=us-west-2
POINT_IN_TIME_RECOVERY_ENABLED=true

# Recovery Objectives
RTO_HOURS=4
RPO_HOURS=1

# ==============================================
# AWS COMPLIANCE AND SECURITY
# ==============================================

# HIPAA Compliance
HIPAA_COMPLIANT_MODE=true
AUDIT_LOGGING_ENABLED=true
ENCRYPTION_AT_REST_ENABLED=true
ENCRYPTION_IN_TRANSIT_ENABLED=true

# Data Classification
DATA_CLASSIFICATION_ENABLED=true
PII_DETECTION_ENABLED=true
PHI_ENCRYPTION_REQUIRED=true

# Security Monitoring
GUARD_DUTY_ENABLED=true
CONFIG_ENABLED=true
SECURITY_HUB_ENABLED=true
CLOUDTRAIL_ENABLED=true

# ==============================================
# AWS PERFORMANCE MONITORING
# ==============================================

# Performance Insights
PERFORMANCE_INSIGHTS_ENABLED=true
ENHANCED_MONITORING_ENABLED=true

# Application Performance Monitoring
APM_ENABLED=true
CUSTOM_METRICS_ENABLED=true
DETAILED_MONITORING_ENABLED=true